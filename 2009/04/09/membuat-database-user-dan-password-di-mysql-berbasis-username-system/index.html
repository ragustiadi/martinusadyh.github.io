
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Membuat DataBase, User dan Password di MySQL Berbasis Username System - Martinus Ady H. BloG</title>
  <meta name="author" content="Martinus Ady H">

  
  <meta name="description" content="Sore tadi waktu ngelihat milis tanya-jawab@linux.or.id, ada pertanyaan dari om Dewa Ehem tentang bagaimana sih cara membuat database, user dan &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://martinusadyh.github.io/2009/04/09/membuat-database-user-dan-password-di-mysql-berbasis-username-system">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Martinus Ady H. BloG" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Martinus Ady H. BloG</a></h1>
  
    <h2>Human Knowledge Belongs To The World</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:martinusadyh.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Membuat DataBase, User Dan Password Di MySQL Berbasis Username System</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-09T23:31:52+07:00" pubdate data-updated="true">Apr 9<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Sore tadi waktu ngelihat milis tanya-jawab@linux.or.id, ada pertanyaan dari om <a href="http://ffaradyc.blogsome.com/">Dewa Ehem</a> tentang bagaimana sih cara membuat database, user dan password sekaligus berbasis pada user yang terdaftar pada mesin linux kita.  Nah dibawah ini pertanyaan yang dikirim oleh om <a href="http://ffaradyc.blogsome.com/">Dewa Ehem</a> ke milis <a href="&#109;&#97;&#105;&#x6c;&#116;&#x6f;&#x3a;&#x74;&#x61;&#x6e;&#x79;&#x61;&#x2d;&#106;&#97;&#119;&#97;&#x62;&#x40;&#x6c;&#105;&#110;&#x75;&#120;&#46;&#x6f;&#114;&#46;&#105;&#100;">&#116;&#97;&#110;&#121;&#x61;&#45;&#x6a;&#97;&#x77;&#97;&#x62;&#x40;&#x6c;&#x69;&#x6e;&#117;&#x78;&#46;&#x6f;&#114;&#x2e;&#105;&#100;</a></p>

<blockquote><p>From: &ldquo;Funny Farady Coastera&rdquo;
To: <a href="&#109;&#97;&#x69;&#108;&#x74;&#x6f;&#58;&#x74;&#x61;&#110;&#x79;&#97;&#45;&#106;&#x61;&#119;&#x61;&#98;&#64;&#108;&#x69;&#x6e;&#117;&#x78;&#46;&#111;&#x72;&#46;&#x69;&#x64;">&#116;&#97;&#x6e;&#x79;&#97;&#45;&#x6a;&#97;&#x77;&#97;&#98;&#x40;&#108;&#105;&#x6e;&#117;&#x78;&#46;&#111;&#x72;&#x2e;&#x69;&#100;</a>
Date: Thu, 9 Apr 2009 16:35:55 +0700
Subject: [tanya-jawab] mengatur privilege user mysql secara masal</p></blockquote>

<p>Assalamu&#8217;alaikum Wr. Wb
Kemarin-kemarin saya sudah pernah nanyain cara membuat user secara masal
menggunakan adduser, sekarang saya mau ngelanjutin pertanyaannya, itu juga
kalau boleh. Ada tidak script yang mampu membuat database sesuai dengan nama
usernya, password jg sesuai dengan nama usernya kemudian mempunyai privilege
select, create, insert, edit, khusus untuk database tersebut (satu user satu
database)</p>

<p>Mohon kalau ada scriptnya, bisa di sharing.. guna pembelajaran bersama.
NB, via console yah.. Bisa pake python, perl atau yang lainnya.. sangat d
mohon bantuannya.
BTW, kalau thread ini masuk kategori programming mohon di pindah</p>

<p>Wassalamu&#8217;alaikum Wr. Wb</p>

<!-- more -->


<p>Nah gara-gara pertanyaan tersebut, akhirnya jadi iseng-iseng deh ngebuat shell scriptnya :D Dan hasil dari pertanyaan yang diajukan dari om <a href="http://ffaradyc.blogsome.com/">Dewa Ehem</a> adalah sebagai berikut :</p>

<pre><code>#!/bin/sh

# Variable declaration
MYSQL_ROOT_USER=root
MYSQL_ROOT_PASSWD=admin
HOME_DIR=/export/home
TMP_FILE=/tmp/LIST_OF_USER.txt
SQL_FILE=/tmp/SQL_FILE.sql

# Function declaration
getListOfUser() {
  cut -d " " -f2 $TMP_FILE | sort | cut -d " " -f1
}

# List available user in home dir
ls $HOME_DIR &gt; $TMP_FILE

for user in $(getListOfUser) ; do
  echo "Creating database and db user base on " $user

  # Creating database with $user
  echo "create database $user;" &gt;&gt; $SQL_FILE

  # Create user first
  echo "CREATE USER '$user'@'localhost' IDENTIFIED BY '$user';" &gt;&gt; $SQL_FILE

  # Give permission to this $user
  echo "GRANT SELECT, INSERT, UPDATE, DELETE ON $user.* TO '$user'@'localhost';" &gt;&gt; $SQL_FILE
done

# Connecting to MySQL then insert to database
mysql -u $MYSQL_ROOT_USER -p$MYSQL_ROOT_PASSWD &lt; $SQL_FILE
echo "Deleting temporary file"
rm -rf $TMP_FILE
rm -rf $SQL_FILE
echo "Creating MySQL User based on user home done. "
</code></pre>

<p>Penjelasan kode diatas adalah sebagai berikut :</p>

<ol>
<li><p>Pada baris ke 4-5 kita pertama-tama mendefinisikan dahulu user dan password yang mempunyai akses full pada database MySQL. Kemudian pada baris berikutnya yaitu pada baris 6 kita mendefinisikan direktori <strong>/home</strong> sebagai target untuk mengetahui jumlah user yang terdaftar pada sistem kita :)</p></li>
<li><p>Nah pada baris 7 dan 8 kita menggunakan 2 buah textfile sebagai file temporary yang berfungsi untuk menampung seluruh nama user yang terdaftar pada sistem dan perintah SQL untuk tiap-tiap username tersebut.</p></li>
<li><p>Kemudian pada baris 11-13, kita buat 1 buah fungsi yang akan membaca nilai variabel <strong>$TMP_FILE</strong> yang mempunyai nilai <strong>/tmp/LIST_OF_USER.txt</strong>. Sedangkan fungsi ini akan digunakan pada perulangan yang terjadi pada baris 18-29.</p></li>
<li><p>Pada baris 16, kita akan mencoba melihat ada berapa user yang terdapat di dalam direktori <strong>/home</strong> dan menuliskan hasilnya pada file <strong>/tmp/LIST_OF_USER.txt</strong> melalui variabel <strong>$TMP_FILE</strong></p></li>
<li><p>Pada baris 18-29 ini adalah proses intinya yaitu pertama-tama kita akan membaca seluruh daftar user yang sudah disimpan pada file <strong>/tmp/LIST_OF_USER.txt</strong> melalui fungsi <strong>getListOfUser</strong> dan menampung hasil pembacaan tersebut pada variabel <strong>user</strong>. Semua proses ini dapat dilihat pada baris ke 18, setelah kita mendapatkan nilai <strong>$user</strong>, kita akan menuliskan perintah SQL untuk membuat user di MySQL pada sebuah file yaitu <strong>/tmp/SQL_FILE.sql</strong>. Pada baris 22-28 ini adalah perintah di MySQL untuk membuat database, user dan memberi hak akses <strong>SELECT, INSERT, UPDATE dan DELETE</strong> di database.</p></li>
<li><p>Setelah selesai membuat sebuah file, sekarang mari kita coba membuat database dan user pada MySQL sesuai dengan user yang terdaftar pada sistem. Caranya yaitu pada waktu login ke MySQL kita kirimkan juga file yang telah kita buat pada baris 18-29, agar ketika proses login kita tidak disuguhi <strong>prompt password</strong> maka gabungkan nilai password pada opsi -p ketika login dan proses ini dapat dilihat pada baris ke 32</p></li>
<li><p>Setelah semua proses selesai, sebaiknya kita bersihkan dulu file-file temporary yang sudah dibuat. Dan ini bisa dilihat pada baris 34-35 kemudian beritahu user bahwa proses telah selesai :)</p></li>
</ol>


<p>Ok semua prosedur dan script sepertinya sudah selesai, sekarang mari kita coba script diatas :) Sebelum mencoba script diatas, mari kita cek dulu bahwa kita belum mempunyai database berdasarkan nama user. Caranya adalah seperti dibawah ini :</p>

<pre><code>[martin@opensolarisbox:~/Latihan/shellScript]$ mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 53
Server version: 5.0.67 Source distribution

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+
3 rows in set (0.00 sec)

mysql&gt; quit
Bye
[martin@opensolarisbox:~/Latihan/shellScript]$
</code></pre>

<p>Ok kita belum punya database berdasarkan username, sekarang beri hak eksekusi pada script yang telah kita buat diatas dengan perintah <strong>chmod +x</strong> kemudian jalankan scriptnya seperti dibawah ini :</p>

<pre><code>[martin@opensolarisbox:~/Latihan/shellScript]$ chmod +x mysqlUser.sh
[martin@opensolarisbox:~/Latihan/shellScript]$ ./mysqlUser.sh
Creating database and db user base on  dewa
Creating database and db user base on  ehem
Creating database and db user base on  martin
Deleting temporary file
Creating MySQL User based on user home done.
[martin@opensolarisbox:~/Latihan/shellScript]$
</code></pre>

<p>Sekarang mari kita cek pada MySQL apakah database dan user sudah dibuat sesuai dengan harapan kita ?</p>

<pre><code>[martin@opensolarisbox:~/Latihan/shellScript]$ mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 55
Server version: 5.0.67 Source distribution

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| dewa               |
| ehem               |
| martin             |
| mysql              |
| test               |
+--------------------+
6 rows in set (0.00 sec)

mysql&gt; show grants for 'dewa'@'localhost';
+-------------------------------------------------------------------------------------------------------------+
| Grants for dewa@localhost                                                                                   |
+-------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'dewa'@'localhost' IDENTIFIED BY PASSWORD '*40494FDF155F3A47EEC1B99D4D4B0CFC56CEDFBE' |
| GRANT SELECT, INSERT, UPDATE, DELETE ON `dewa`.* TO 'dewa'@'localhost'                                      |
+-------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql&gt; show grants for 'ehem'@'localhost';
+-------------------------------------------------------------------------------------------------------------+
| Grants for ehem@localhost                                                                                   |
+-------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'ehem'@'localhost' IDENTIFIED BY PASSWORD '*E96BA83EF4FE05623DAA90696D92E551A7B865D6' |
| GRANT SELECT, INSERT, UPDATE, DELETE ON `ehem`.* TO 'ehem'@'localhost'                                      |
+-------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql&gt; show grants for 'martin'@'localhost';
+---------------------------------------------------------------------------------------------------------------+
| Grants for martin@localhost                                                                                   |
+---------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'martin'@'localhost' IDENTIFIED BY PASSWORD '*CD4AFD8FF7FC169D64F8F55753F4DFAD49B5D780' |
| GRANT SELECT, INSERT, UPDATE, DELETE ON `martin`.* TO 'martin'@'localhost'                                    |
+---------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql&gt; quit
Bye
[martin@opensolarisbox:~/Latihan/shellScript]$
</code></pre>

<p>Dan untuk membuktikannya, mari kita coba login ke MySQL dengan user yang terdaftar pada sistem dan passwordnya sama dengan nama user tersebut seperti dibawah ini :</p>

<pre><code>[martin@opensolarisbox:~/Latihan/shellScript]$ mysql -u martin -pmartin
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 56
Server version: 5.0.67 Source distribution

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| martin             |
| test               |
+--------------------+
3 rows in set (0.37 sec)

mysql&gt; quit
Bye
[martin@opensolarisbox:~/Latihan/shellScript]$
</code></pre>

<p>Nah selesai juga akhirnya, dan asyik juga yah :D :)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">admin</span></span>

      








  


<time datetime="2009-04-09T23:31:52+07:00" pubdate data-updated="true">Apr 9<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/database/'>DataBase</a>, <a class='category' href='/blog/categories/opensolaris/'>OpenSolaris</a>, <a class='category' href='/blog/categories/shell-script/'>Shell Script</a>, <a class='category' href='/blog/categories/slackware/'>Slackware</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://martinusadyh.github.io/2009/04/09/membuat-database-user-dan-password-di-mysql-berbasis-username-system/" data-via="" data-counturl="http://martinusadyh.github.io/2009/04/09/membuat-database-user-dan-password-di-mysql-berbasis-username-system/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2009/04/09/tambah-kategori-shell-script/" title="Previous Post: Tambah Kategori Shell Script">&laquo; Tambah Kategori Shell Script</a>
      
      
        <a class="basic-alignment right" href="/2009/04/11/release-zencafe-20/" title="Next Post: Release Zencafe 2.0">Release Zencafe 2.0 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/07/27/cara-mudah-mendebug-widget-di-dojo/">Cara Mudah Mendebug Widget Di Dojo</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/21/persiapan-sebelum-melakukan-pendakian/">Persiapan Sebelum Melakukan Pendakian</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/27/pendakian-gunung-sindoro-3153-mdpl/">Pendakian Gunung Sindoro 3153 Mdpl</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/22/howto-disable-individual-jetpack-module/">Howto Disable Individual Jetpack Module</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/14/bercengkrama-dengan-nusantarider-di-event-ride-n-roast/">Bercengkrama Dengan Nusantarider Di Event Ride N Roast</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Martinus Ady H -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
